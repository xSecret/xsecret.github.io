"use strict";angular.module("xsecretApp",["ngRoute","infinite-scroll","angulartics","angulartics.google.analytics"]).run(["$rootScope",function(a){a.safe=!0}]).config(["$analyticsProvider",function(a){a.firstPageview(!0)}]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/video/:id",{templateUrl:"views/video.html",controller:"VideoCtrl"}).when("/:category",{templateUrl:"views/category.html",controller:"CategoryCtrl"}).otherwise({redirectTo:"/"})}]).config(["$locationProvider","$httpProvider",function(a,b){a.html5Mode(!0).hashPrefix("!"),b.defaults.cache=!0,b.defaults.headers.common.Authorization="Basic c3Nlc2VkaXNhYm9kdXJpdmVydmVyc3RlOm12ZDhXaG5McjBTV2ZYYWc4V1c2M2owZQ=="}]),angular.module("xsecretApp").controller("MainCtrl",["$scope","Videos",function(a,b){b.categories().success(function(b){a.categories=b.rows})}]),angular.module("xsecretApp").controller("VideoCtrl",["$scope","$sce","$routeParams","Videos",function(a,b,c,d){a.videoId=c.id,d.byId(a.videoId).success(function(b){a.video=b}),a.embed=function(a){return b.trustAsResourceUrl("http://pornsharing.com/App_Themes/pornsharianew/embed.php?id="+a+"&utm_source=xSecret_embed")}}]),angular.module("xsecretApp").controller("CategoryCtrl",["$scope","$location","$routeParams","Videos",function(a,b,c,d){a.category=c.category,a.videos=d.categoryPage(a.category),a.videoClick=function(a){b.path("/video/"+a._id)},a.nextPage=function(){a.videos.nextPage()}}]),angular.module("xsecretApp").service("Videos",["$http",function(a){var b="http://xsecret.cloudant.com/videos/";this.byId=function(c){var d=b+c;return a.get(d)},this.categories=function(){var c=b+"_design/categories/_view/summary?group=true";return a.get(c)},this.category=function(c){var d=b+'_design/categories/_view/names?include_docs=true&limit=40&key="'+c+'"';return a.get(d)},this.categoryPage=function(c){var d=60,e={data:[],busy:!1,current:0,next:0,nextPage:function(){if(!e.busy){e.busy=!0;var f=b+"_design/categories/_view/names?include_docs=true&limit="+d+"&skip="+e.next*d+'&key="'+c+'"';a.get(f).success(function(a){angular.forEach(a.rows,function(a){e.data.push(a)}),e.current=e.next,e.next=e.next+1,e.busy=!1}.bind(this))}}};return e}}]),angular.module("xsecretApp").filter("duration",function(){return function(a){var b=function(a){return 10>a?"0"+a:a},c=Math.floor(a/3600),d=a%3600,e=Math.floor(d/60),f=d%60,g=Math.ceil(f),h=b(e)+":"+b(g);return 0!=c&&(h=b(c)+":"+h),h}});